{
  "resourceSpans": [
    {
      "resource": {
        "attributes": [
          {
            "key": "host.name",
            "value": { "stringValue": "test-host" }
          },
          { "key": "host.arch", "value": { "stringValue": "amd64" } },
          {
            "key": "host.id",
            "value": { "stringValue": "test-host-id-12345" }
          },
          { "key": "process.pid", "value": { "intValue": 13003 } },
          {
            "key": "process.executable.name",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.executable.path",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.command_args",
            "value": {
              "arrayValue": {
                "values": [
                  {
                    "stringValue": "test/bin/node"
                  },
                  { "stringValue": "--require" },
                  {
                    "stringValue": "test/node_modules/tsx/dist/preflight.cjs"
                  },
                  { "stringValue": "--import" },
                  {
                    "stringValue": "file://test/node_modules/tsx/dist/loader.mjs"
                  },
                  {
                    "stringValue": "test/index.ts"
                  }
                ]
              }
            }
          },
          {
            "key": "process.runtime.version",
            "value": { "stringValue": "22.21.1" }
          },
          {
            "key": "process.runtime.name",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "process.runtime.description",
            "value": { "stringValue": "Node.js" }
          },
          {
            "key": "process.command",
            "value": {
              "stringValue": "test/index.ts"
            }
          },
          { "key": "process.owner", "value": { "stringValue": "user" } },
          {
            "key": "service.name",
            "value": { "stringValue": "agentmark-client" }
          },
          { "key": "agentmark.app_id", "value": { "stringValue": "" } },
          {
            "key": "telemetry.sdk.language",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "telemetry.sdk.name",
            "value": { "stringValue": "opentelemetry" }
          },
          {
            "key": "telemetry.sdk.version",
            "value": { "stringValue": "2.1.0" }
          }
        ],
        "droppedAttributesCount": 0
      },
      "scopeSpans": [
        {
          "scope": { "name": "ai" },
          "spans": [
            {
              "traceId": "test-trace-id-1234567890abcdef",
              "spanId": "2c988f7891f5fced",
              "parentSpanId": "796e75bcbe129bff",
              "name": "ai.generateText.doGenerate",
              "kind": 1,
              "startTimeUnixNano": "1764591474937000000",
              "endTimeUnixNano": "1764591476605878565",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.generateText.doGenerate" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.generateText.doGenerate" }
                },
                {
                  "key": "ai.model.provider",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "ai.model.id",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.settings.maxRetries",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.telemetry.metadata.trace_id",
                  "value": { "stringValue": "trace-123" }
                },
                {
                  "key": "ai.telemetry.metadata.trace_name",
                  "value": { "stringValue": "customer-support" }
                },
                {
                  "key": "ai.telemetry.metadata.user_id",
                  "value": { "stringValue": "user-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_id",
                  "value": { "stringValue": "session-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_name",
                  "value": { "stringValue": "my-first-session" }
                },
                {
                  "key": "ai.telemetry.metadata.prompt_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.props",
                  "value": {
                    "stringValue": "{\"customer_question\":\"How long does shipping take?\"}"
                  }
                },
                {
                  "key": "ai.prompt.format",
                  "value": { "stringValue": "messages" }
                },
                {
                  "key": "ai.prompt.messages",
                  "value": {
                    "stringValue": "[{\"role\":\"system\",\"content\":\"You are a customer service agent for a company that sells products online. You are given a customer's question and you need to respond to the customer. You need to be friendly, professional, and helpful.\\n\\nYou have access to the following tool:\\n\\n* search\\\\_knowledgebase: Search the company knowledgebase for information about shipping, warranty, and returns. Use this when customers ask about these topics.\"},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"How long does shipping take?\"}]}]"
                  }
                },
                {
                  "key": "ai.prompt.tools",
                  "value": {
                    "arrayValue": {
                      "values": [
                        {
                          "stringValue": "{\"type\":\"function\",\"name\":\"search_knowledgebase\",\"description\":\"Search the company knowledgebase for information about shipping, warranty, and returns policies.\",\"parameters\":{\"type\":\"object\",\"properties\":{\"query\":{\"type\":\"string\",\"description\":\"The search query to find relevant information\"}},\"required\":[\"query\"]}}"
                        }
                      ]
                    }
                  }
                },
                {
                  "key": "ai.prompt.toolChoice",
                  "value": { "stringValue": "{\"type\":\"auto\"}" }
                },
                {
                  "key": "gen_ai.system",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "gen_ai.request.model",
                  "value": { "stringValue": "gpt-4o" }
                }
              ],
              "droppedAttributesCount": 0,
              "events": [
                {
                  "attributes": [
                    {
                      "key": "exception.type",
                      "value": { "stringValue": "AI_APICallError" }
                    },
                    {
                      "key": "exception.message",
                      "value": {
                        "stringValue": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
                      }
                    },
                    {
                      "key": "exception.stacktrace",
                      "value": {
                        "stringValue": "AI_APICallError: You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at <anonymous> (test/node_modules/@ai-sdk/openai/node_modules/@ai-sdk/provider-utils/src/response-handler.ts:59:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async postToApi (test/node_modules/@ai-sdk/openai/node_modules/@ai-sdk/provider-utils/src/post-to-api.ts:111:28)\n    at async OpenAIChatLanguageModel.doGenerate (test/node_modules/@ai-sdk/openai/src/openai-chat-language-model.ts:379:9)\n    at async fn (test/node_modules/ai/core/generate-text/generate-text.ts:407:30)\n    at async <anonymous> (test/node_modules/ai/core/telemetry/record-span.ts:18:22)\n    at async _retryWithExponentialBackoff (test/node_modules/ai/util/retry-with-exponential-backoff.ts:36:12)\n    at async fn (test/node_modules/ai/core/generate-text/generate-text.ts:363:32)\n    at async <anonymous> (test/node_modules/ai/core/telemetry/record-span.ts:18:22)\n    at async runCustomerSupport (test/index.ts:26:15)"
                      }
                    }
                  ],
                  "name": "exception",
                  "timeUnixNano": "1764591476605774265",
                  "droppedAttributesCount": 0
                }
              ],
              "droppedEventsCount": 0,
              "status": {
                "code": 2,
                "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
              },
              "links": [],
              "droppedLinksCount": 0
            }
          ]
        }
      ]
    },
    {
      "resource": {
        "attributes": [
          {
            "key": "host.name",
            "value": { "stringValue": "test-host" }
          },
          { "key": "host.arch", "value": { "stringValue": "amd64" } },
          {
            "key": "host.id",
            "value": { "stringValue": "test-host-id-12345" }
          },
          { "key": "process.pid", "value": { "intValue": 13003 } },
          {
            "key": "process.executable.name",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.executable.path",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.command_args",
            "value": {
              "arrayValue": {
                "values": [
                  {
                    "stringValue": "test/bin/node"
                  },
                  { "stringValue": "--require" },
                  {
                    "stringValue": "test/node_modules/tsx/dist/preflight.cjs"
                  },
                  { "stringValue": "--import" },
                  {
                    "stringValue": "file://test/node_modules/tsx/dist/loader.mjs"
                  },
                  {
                    "stringValue": "test/index.ts"
                  }
                ]
              }
            }
          },
          {
            "key": "process.runtime.version",
            "value": { "stringValue": "22.21.1" }
          },
          {
            "key": "process.runtime.name",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "process.runtime.description",
            "value": { "stringValue": "Node.js" }
          },
          {
            "key": "process.command",
            "value": {
              "stringValue": "test/index.ts"
            }
          },
          { "key": "process.owner", "value": { "stringValue": "user" } },
          {
            "key": "service.name",
            "value": { "stringValue": "agentmark-client" }
          },
          { "key": "agentmark.app_id", "value": { "stringValue": "" } },
          {
            "key": "telemetry.sdk.language",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "telemetry.sdk.name",
            "value": { "stringValue": "opentelemetry" }
          },
          {
            "key": "telemetry.sdk.version",
            "value": { "stringValue": "2.1.0" }
          }
        ],
        "droppedAttributesCount": 0
      },
      "scopeSpans": [
        {
          "scope": { "name": "ai" },
          "spans": [
            {
              "traceId": "test-trace-id-1234567890abcdef",
              "spanId": "967bea56a3699b49",
              "parentSpanId": "796e75bcbe129bff",
              "name": "ai.generateText.doGenerate",
              "kind": 1,
              "startTimeUnixNano": "1764591478608000000",
              "endTimeUnixNano": "1764591479418308395",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.generateText.doGenerate" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.generateText.doGenerate" }
                },
                {
                  "key": "ai.model.provider",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "ai.model.id",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.settings.maxRetries",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.telemetry.metadata.trace_id",
                  "value": { "stringValue": "trace-123" }
                },
                {
                  "key": "ai.telemetry.metadata.trace_name",
                  "value": { "stringValue": "customer-support" }
                },
                {
                  "key": "ai.telemetry.metadata.user_id",
                  "value": { "stringValue": "user-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_id",
                  "value": { "stringValue": "session-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_name",
                  "value": { "stringValue": "my-first-session" }
                },
                {
                  "key": "ai.telemetry.metadata.prompt_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.props",
                  "value": {
                    "stringValue": "{\"customer_question\":\"How long does shipping take?\"}"
                  }
                },
                {
                  "key": "ai.prompt.format",
                  "value": { "stringValue": "messages" }
                },
                {
                  "key": "ai.prompt.messages",
                  "value": {
                    "stringValue": "[{\"role\":\"system\",\"content\":\"You are a customer service agent for a company that sells products online. You are given a customer's question and you need to respond to the customer. You need to be friendly, professional, and helpful.\\n\\nYou have access to the following tool:\\n\\n* search\\\\_knowledgebase: Search the company knowledgebase for information about shipping, warranty, and returns. Use this when customers ask about these topics.\"},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"How long does shipping take?\"}]}]"
                  }
                },
                {
                  "key": "ai.prompt.tools",
                  "value": {
                    "arrayValue": {
                      "values": [
                        {
                          "stringValue": "{\"type\":\"function\",\"name\":\"search_knowledgebase\",\"description\":\"Search the company knowledgebase for information about shipping, warranty, and returns policies.\",\"parameters\":{\"type\":\"object\",\"properties\":{\"query\":{\"type\":\"string\",\"description\":\"The search query to find relevant information\"}},\"required\":[\"query\"]}}"
                        }
                      ]
                    }
                  }
                },
                {
                  "key": "ai.prompt.toolChoice",
                  "value": { "stringValue": "{\"type\":\"auto\"}" }
                },
                {
                  "key": "gen_ai.system",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "gen_ai.request.model",
                  "value": { "stringValue": "gpt-4o" }
                }
              ],
              "droppedAttributesCount": 0,
              "events": [
                {
                  "attributes": [
                    {
                      "key": "exception.type",
                      "value": { "stringValue": "AI_APICallError" }
                    },
                    {
                      "key": "exception.message",
                      "value": {
                        "stringValue": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
                      }
                    },
                    {
                      "key": "exception.stacktrace",
                      "value": {
                        "stringValue": "AI_APICallError: You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at <anonymous> (test/node_modules/@ai-sdk/openai/node_modules/@ai-sdk/provider-utils/src/response-handler.ts:59:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async postToApi (test/node_modules/@ai-sdk/openai/node_modules/@ai-sdk/provider-utils/src/post-to-api.ts:111:28)\n    at async OpenAIChatLanguageModel.doGenerate (test/node_modules/@ai-sdk/openai/src/openai-chat-language-model.ts:379:9)\n    at async fn (test/node_modules/ai/core/generate-text/generate-text.ts:407:30)\n    at async <anonymous> (test/node_modules/ai/core/telemetry/record-span.ts:18:22)\n    at async _retryWithExponentialBackoff (test/node_modules/ai/util/retry-with-exponential-backoff.ts:36:12)\n    at async fn (test/node_modules/ai/core/generate-text/generate-text.ts:363:32)\n    at async <anonymous> (test/node_modules/ai/core/telemetry/record-span.ts:18:22)\n    at async runCustomerSupport (test/index.ts:26:15)"
                      }
                    }
                  ],
                  "name": "exception",
                  "timeUnixNano": "1764591479418251795",
                  "droppedAttributesCount": 0
                }
              ],
              "droppedEventsCount": 0,
              "status": {
                "code": 2,
                "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
              },
              "links": [],
              "droppedLinksCount": 0
            }
          ]
        }
      ]
    },
    {
      "resource": {
        "attributes": [
          {
            "key": "host.name",
            "value": { "stringValue": "test-host" }
          },
          { "key": "host.arch", "value": { "stringValue": "amd64" } },
          {
            "key": "host.id",
            "value": { "stringValue": "test-host-id-12345" }
          },
          { "key": "process.pid", "value": { "intValue": 13003 } },
          {
            "key": "process.executable.name",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.executable.path",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.command_args",
            "value": {
              "arrayValue": {
                "values": [
                  {
                    "stringValue": "test/bin/node"
                  },
                  { "stringValue": "--require" },
                  {
                    "stringValue": "test/node_modules/tsx/dist/preflight.cjs"
                  },
                  { "stringValue": "--import" },
                  {
                    "stringValue": "file://test/node_modules/tsx/dist/loader.mjs"
                  },
                  {
                    "stringValue": "test/index.ts"
                  }
                ]
              }
            }
          },
          {
            "key": "process.runtime.version",
            "value": { "stringValue": "22.21.1" }
          },
          {
            "key": "process.runtime.name",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "process.runtime.description",
            "value": { "stringValue": "Node.js" }
          },
          {
            "key": "process.command",
            "value": {
              "stringValue": "test/index.ts"
            }
          },
          { "key": "process.owner", "value": { "stringValue": "user" } },
          {
            "key": "service.name",
            "value": { "stringValue": "agentmark-client" }
          },
          { "key": "agentmark.app_id", "value": { "stringValue": "" } },
          {
            "key": "telemetry.sdk.language",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "telemetry.sdk.name",
            "value": { "stringValue": "opentelemetry" }
          },
          {
            "key": "telemetry.sdk.version",
            "value": { "stringValue": "2.1.0" }
          }
        ],
        "droppedAttributesCount": 0
      },
      "scopeSpans": [
        {
          "scope": { "name": "ai" },
          "spans": [
            {
              "traceId": "test-trace-id-1234567890abcdef",
              "spanId": "3f837e15f87116c9",
              "parentSpanId": "796e75bcbe129bff",
              "name": "ai.generateText.doGenerate",
              "kind": 1,
              "startTimeUnixNano": "1764591483422000000",
              "endTimeUnixNano": "1764591485113774181",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.generateText.doGenerate" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.generateText.doGenerate" }
                },
                {
                  "key": "ai.model.provider",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "ai.model.id",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.settings.maxRetries",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.telemetry.metadata.trace_id",
                  "value": { "stringValue": "trace-123" }
                },
                {
                  "key": "ai.telemetry.metadata.trace_name",
                  "value": { "stringValue": "customer-support" }
                },
                {
                  "key": "ai.telemetry.metadata.user_id",
                  "value": { "stringValue": "user-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_id",
                  "value": { "stringValue": "session-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_name",
                  "value": { "stringValue": "my-first-session" }
                },
                {
                  "key": "ai.telemetry.metadata.prompt_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.props",
                  "value": {
                    "stringValue": "{\"customer_question\":\"How long does shipping take?\"}"
                  }
                },
                {
                  "key": "ai.prompt.format",
                  "value": { "stringValue": "messages" }
                },
                {
                  "key": "ai.prompt.messages",
                  "value": {
                    "stringValue": "[{\"role\":\"system\",\"content\":\"You are a customer service agent for a company that sells products online. You are given a customer's question and you need to respond to the customer. You need to be friendly, professional, and helpful.\\n\\nYou have access to the following tool:\\n\\n* search\\\\_knowledgebase: Search the company knowledgebase for information about shipping, warranty, and returns. Use this when customers ask about these topics.\"},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"How long does shipping take?\"}]}]"
                  }
                },
                {
                  "key": "ai.prompt.tools",
                  "value": {
                    "arrayValue": {
                      "values": [
                        {
                          "stringValue": "{\"type\":\"function\",\"name\":\"search_knowledgebase\",\"description\":\"Search the company knowledgebase for information about shipping, warranty, and returns policies.\",\"parameters\":{\"type\":\"object\",\"properties\":{\"query\":{\"type\":\"string\",\"description\":\"The search query to find relevant information\"}},\"required\":[\"query\"]}}"
                        }
                      ]
                    }
                  }
                },
                {
                  "key": "ai.prompt.toolChoice",
                  "value": { "stringValue": "{\"type\":\"auto\"}" }
                },
                {
                  "key": "gen_ai.system",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "gen_ai.request.model",
                  "value": { "stringValue": "gpt-4o" }
                }
              ],
              "droppedAttributesCount": 0,
              "events": [
                {
                  "attributes": [
                    {
                      "key": "exception.type",
                      "value": { "stringValue": "AI_APICallError" }
                    },
                    {
                      "key": "exception.message",
                      "value": {
                        "stringValue": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
                      }
                    },
                    {
                      "key": "exception.stacktrace",
                      "value": {
                        "stringValue": "AI_APICallError: You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at <anonymous> (test/node_modules/@ai-sdk/openai/node_modules/@ai-sdk/provider-utils/src/response-handler.ts:59:16)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async postToApi (test/node_modules/@ai-sdk/openai/node_modules/@ai-sdk/provider-utils/src/post-to-api.ts:111:28)\n    at async OpenAIChatLanguageModel.doGenerate (test/node_modules/@ai-sdk/openai/src/openai-chat-language-model.ts:379:9)\n    at async fn (test/node_modules/ai/core/generate-text/generate-text.ts:407:30)\n    at async <anonymous> (test/node_modules/ai/core/telemetry/record-span.ts:18:22)\n    at async _retryWithExponentialBackoff (test/node_modules/ai/util/retry-with-exponential-backoff.ts:36:12)\n    at async fn (test/node_modules/ai/core/generate-text/generate-text.ts:363:32)\n    at async <anonymous> (test/node_modules/ai/core/telemetry/record-span.ts:18:22)\n    at async runCustomerSupport (test/index.ts:26:15)"
                      }
                    }
                  ],
                  "name": "exception",
                  "timeUnixNano": "1764591485113714081",
                  "droppedAttributesCount": 0
                }
              ],
              "droppedEventsCount": 0,
              "status": {
                "code": 2,
                "message": "You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
              },
              "links": [],
              "droppedLinksCount": 0
            }
          ]
        }
      ]
    },
    {
      "resource": {
        "attributes": [
          {
            "key": "host.name",
            "value": { "stringValue": "test-host" }
          },
          { "key": "host.arch", "value": { "stringValue": "amd64" } },
          {
            "key": "host.id",
            "value": { "stringValue": "test-host-id-12345" }
          },
          { "key": "process.pid", "value": { "intValue": 13003 } },
          {
            "key": "process.executable.name",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.executable.path",
            "value": {
              "stringValue": "test/bin/node"
            }
          },
          {
            "key": "process.command_args",
            "value": {
              "arrayValue": {
                "values": [
                  {
                    "stringValue": "test/bin/node"
                  },
                  { "stringValue": "--require" },
                  {
                    "stringValue": "test/node_modules/tsx/dist/preflight.cjs"
                  },
                  { "stringValue": "--import" },
                  {
                    "stringValue": "file://test/node_modules/tsx/dist/loader.mjs"
                  },
                  {
                    "stringValue": "test/index.ts"
                  }
                ]
              }
            }
          },
          {
            "key": "process.runtime.version",
            "value": { "stringValue": "22.21.1" }
          },
          {
            "key": "process.runtime.name",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "process.runtime.description",
            "value": { "stringValue": "Node.js" }
          },
          {
            "key": "process.command",
            "value": {
              "stringValue": "test/index.ts"
            }
          },
          { "key": "process.owner", "value": { "stringValue": "user" } },
          {
            "key": "service.name",
            "value": { "stringValue": "agentmark-client" }
          },
          { "key": "agentmark.app_id", "value": { "stringValue": "" } },
          {
            "key": "telemetry.sdk.language",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "telemetry.sdk.name",
            "value": { "stringValue": "opentelemetry" }
          },
          {
            "key": "telemetry.sdk.version",
            "value": { "stringValue": "2.1.0" }
          }
        ],
        "droppedAttributesCount": 0
      },
      "scopeSpans": [
        {
          "scope": { "name": "ai" },
          "spans": [
            {
              "traceId": "test-trace-id-1234567890abcdef",
              "spanId": "796e75bcbe129bff",
              "name": "ai.generateText",
              "kind": 1,
              "startTimeUnixNano": "1764591474935000000",
              "endTimeUnixNano": "1764591485117162774",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.generateText" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.generateText" }
                },
                {
                  "key": "ai.model.provider",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "ai.model.id",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.settings.maxRetries",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.telemetry.metadata.trace_id",
                  "value": { "stringValue": "trace-123" }
                },
                {
                  "key": "ai.telemetry.metadata.trace_name",
                  "value": { "stringValue": "customer-support" }
                },
                {
                  "key": "ai.telemetry.metadata.user_id",
                  "value": { "stringValue": "user-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_id",
                  "value": { "stringValue": "session-123" }
                },
                {
                  "key": "ai.telemetry.metadata.session_name",
                  "value": { "stringValue": "my-first-session" }
                },
                {
                  "key": "ai.telemetry.metadata.prompt_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.props",
                  "value": {
                    "stringValue": "{\"customer_question\":\"How long does shipping take?\"}"
                  }
                },
                {
                  "key": "ai.prompt",
                  "value": {
                    "stringValue": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are a customer service agent for a company that sells products online. You are given a customer's question and you need to respond to the customer. You need to be friendly, professional, and helpful.\\n\\nYou have access to the following tool:\\n\\n* search\\\\_knowledgebase: Search the company knowledgebase for information about shipping, warranty, and returns. Use this when customers ask about these topics.\"},{\"role\":\"user\",\"content\":\"How long does shipping take?\"}]}"
                  }
                },
                { "key": "ai.settings.maxSteps", "value": { "intValue": 3 } }
              ],
              "droppedAttributesCount": 0,
              "events": [
                {
                  "attributes": [
                    {
                      "key": "exception.type",
                      "value": { "stringValue": "AI_RetryError" }
                    },
                    {
                      "key": "exception.message",
                      "value": {
                        "stringValue": "Failed after 3 attempts. Last error: You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
                      }
                    },
                    {
                      "key": "exception.stacktrace",
                      "value": {
                        "stringValue": "AI_RetryError: Failed after 3 attempts. Last error: You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors.\n    at _retryWithExponentialBackoff (test/node_modules/ai/util/retry-with-exponential-backoff.ts:51:13)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fn (test/node_modules/ai/core/generate-text/generate-text.ts:363:32)\n    at async <anonymous> (test/node_modules/ai/core/telemetry/record-span.ts:18:22)\n    at async runCustomerSupport (test/index.ts:26:15)\n    at async main (test/index.ts:34:23)"
                      }
                    }
                  ],
                  "name": "exception",
                  "timeUnixNano": "1764591485117090574",
                  "droppedAttributesCount": 0
                }
              ],
              "droppedEventsCount": 0,
              "status": {
                "code": 2,
                "message": "Failed after 3 attempts. Last error: You exceeded your current quota, please check your plan and billing details. For more information on this error, read the docs: https://platform.openai.com/docs/guides/error-codes/api-errors."
              },
              "links": [],
              "droppedLinksCount": 0
            }
          ]
        }
      ]
    }
  ]
}

