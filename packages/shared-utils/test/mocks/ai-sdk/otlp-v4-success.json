{
  "resourceSpans": [
    {
      "resource": {
        "attributes": [
          {
            "key": "host.name",
            "value": { "stringValue": "test-host-xyz789" }
          },
          { "key": "host.arch", "value": { "stringValue": "amd64" } },
          {
            "key": "host.id",
            "value": { "stringValue": "a1b2c3d4e5f6g7h8i9j0k1l2m3n4o5p6" }
          },
          { "key": "process.pid", "value": { "intValue": 12345 } },
          {
            "key": "process.executable.name",
            "value": {
              "stringValue": "/test/bin/node"
            }
          },
          {
            "key": "process.executable.path",
            "value": {
              "stringValue": "/test/bin/node"
            }
          },
          {
            "key": "process.command_args",
            "value": {
              "arrayValue": {
                "values": [
                  {
                    "stringValue": "/test/bin/node"
                  },
                  { "stringValue": "--require" },
                  {
                    "stringValue": "/test/index.ts"
                  },
                  { "stringValue": "--import" },
                  {
                    "stringValue": "/test/index.ts"
                  },
                  {
                    "stringValue": "/test/index.ts"
                  },
                  { "stringValue": "agentmark.client.ts" },
                  { "stringValue": "agentmark/**/*" },
                  { "stringValue": "--webhook-port=9417" },
                  { "stringValue": "--api-server-port=9418" }
                ]
              }
            }
          },
          {
            "key": "process.runtime.version",
            "value": { "stringValue": "22.21.1" }
          },
          {
            "key": "process.runtime.name",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "process.runtime.description",
            "value": { "stringValue": "Node.js" }
          },
          {
            "key": "process.command",
            "value": {
              "stringValue": "/test/index.ts"
            }
          },
          { "key": "process.owner", "value": { "stringValue": "testuser" } },
          {
            "key": "service.name",
            "value": { "stringValue": "agentmark-client" }
          },
          { "key": "agentmark.app_id", "value": { "stringValue": "" } },
          {
            "key": "telemetry.sdk.language",
            "value": { "stringValue": "nodejs" }
          },
          {
            "key": "telemetry.sdk.name",
            "value": { "stringValue": "opentelemetry" }
          },
          {
            "key": "telemetry.sdk.version",
            "value": { "stringValue": "2.1.0" }
          }
        ],
        "droppedAttributesCount": 0
      },
      "scopeSpans": [
        {
          "scope": { "name": "ai" },
          "spans": [
            {
              "traceId": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6",
              "spanId": "f1e2d3c4b5a6978",
              "parentSpanId": "a9b8c7d6e5f4321",
              "name": "ai.toolCall",
              "kind": 1,
              "startTimeUnixNano": "1764673067885000000",
              "endTimeUnixNano": "1764673068388774320",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.toolCall" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.toolCall" }
                },
                {
                  "key": "ai.toolCall.name",
                  "value": { "stringValue": "search_knowledgebase" }
                },
                {
                  "key": "ai.toolCall.id",
                  "value": { "stringValue": "call_xyz123abc456def789" }
                },
                {
                  "key": "ai.toolCall.args",
                  "value": { "stringValue": "{\"query\":\"shipping times\"}" }
                },
                {
                  "key": "ai.toolCall.result",
                  "value": {
                    "stringValue": "{\"articles\":[{\"topic\":\"shipping\",\"content\":\"Standard shipping takes 3–5 business days.\"},{\"topic\":\"warranty\",\"content\":\"All products include a 1-year limited warranty.\"},{\"topic\":\"returns\",\"content\":\"You can return items within 30 days of delivery.\"}]}"
                  }
                }
              ],
              "droppedAttributesCount": 0,
              "events": [],
              "droppedEventsCount": 0,
              "status": { "code": 0 },
              "links": [],
              "droppedLinksCount": 0
            },
            {
              "traceId": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6",
              "spanId": "b2c3d4e5f6a7b8c9",
              "parentSpanId": "a9b8c7d6e5f4321",
              "name": "ai.streamText.doStream",
              "kind": 1,
              "startTimeUnixNano": "1764673066493000000",
              "endTimeUnixNano": "1764673068392719352",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.streamText.doStream" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.streamText.doStream" }
                },
                {
                  "key": "ai.model.provider",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "ai.model.id",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.settings.maxRetries",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.telemetry.metadata.trace_id",
                  "value": { "stringValue": "trace-abc123-def456-ghi789" }
                },
                {
                  "key": "ai.telemetry.metadata.trace_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.prompt_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.props",
                  "value": {
                    "stringValue": "{\"customer_question\":\"I'm having trouble with my order. How long does shipping take?\"}"
                  }
                },
                {
                  "key": "ai.prompt.format",
                  "value": { "stringValue": "messages" }
                },
                {
                  "key": "ai.prompt.messages",
                  "value": {
                    "stringValue": "[{\"role\":\"system\",\"content\":\"You are a customer service agent for a company that sells products online. You are given a customer's question and you need to respond to the customer. You need to be friendly, professional, and helpful.\\n\\nYou have access to the following tool:\\n\\n* search\\\\_knowledgebase: Search the company knowledgebase for information about shipping, warranty, and returns. Use this when customers ask about these topics.\"},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"I'm having trouble with my order. How long does shipping take?\"}]}]"
                  }
                },
                {
                  "key": "ai.prompt.tools",
                  "value": {
                    "arrayValue": {
                      "values": [
                        {
                          "stringValue": "{\"type\":\"function\",\"name\":\"search_knowledgebase\",\"description\":\"Search the company knowledgebase for information about shipping, warranty, and returns policies.\",\"parameters\":{\"type\":\"object\",\"properties\":{\"query\":{\"type\":\"string\",\"description\":\"The search query to find relevant information\"}},\"required\":[\"query\"]}}"
                        }
                      ]
                    }
                  }
                },
                {
                  "key": "ai.prompt.toolChoice",
                  "value": { "stringValue": "{\"type\":\"auto\"}" }
                },
                {
                  "key": "gen_ai.system",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "gen_ai.request.model",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.response.msToFirstChunk",
                  "value": { "doubleValue": 1304.0409099999997 }
                },
                {
                  "key": "ai.response.msToFinish",
                  "value": { "doubleValue": 1897.6374510000005 }
                },
                {
                  "key": "ai.response.avgCompletionTokensPerSecond",
                  "value": { "doubleValue": 8.958507849347876 }
                },
                {
                  "key": "ai.response.finishReason",
                  "value": { "stringValue": "tool-calls" }
                },
                {
                  "key": "ai.response.text",
                  "value": { "stringValue": "" }
                },
                {
                  "key": "ai.response.toolCalls",
                  "value": {
                    "stringValue": "[{\"type\":\"tool-call\",\"toolCallId\":\"call_xyz123abc456def789\",\"toolName\":\"search_knowledgebase\",\"args\":{\"query\":\"shipping times\"}}]"
                  }
                },
                {
                  "key": "ai.response.id",
                  "value": { "stringValue": "chatcmpl-xyz789abc123def456" }
                },
                {
                  "key": "ai.response.model",
                  "value": { "stringValue": "gpt-4o-2024-08-06" }
                },
                {
                  "key": "ai.response.timestamp",
                  "value": { "stringValue": "2025-12-02T10:57:46.000Z" }
                },
                {
                  "key": "ai.response.providerMetadata",
                  "value": {
                    "stringValue": "{\"openai\":{\"reasoningTokens\":0,\"acceptedPredictionTokens\":0,\"rejectedPredictionTokens\":0,\"cachedPromptTokens\":0}}"
                  }
                },
                {
                  "key": "ai.usage.promptTokens",
                  "value": { "intValue": 156 }
                },
                {
                  "key": "ai.usage.completionTokens",
                  "value": { "intValue": 17 }
                },
                {
                  "key": "gen_ai.response.finish_reasons",
                  "value": {
                    "arrayValue": {
                      "values": [{ "stringValue": "tool-calls" }]
                    }
                  }
                },
                {
                  "key": "gen_ai.response.id",
                  "value": { "stringValue": "chatcmpl-xyz789abc123def456" }
                },
                {
                  "key": "gen_ai.response.model",
                  "value": { "stringValue": "gpt-4o-2024-08-06" }
                },
                {
                  "key": "gen_ai.usage.input_tokens",
                  "value": { "intValue": 156 }
                },
                {
                  "key": "gen_ai.usage.output_tokens",
                  "value": { "intValue": 17 }
                }
              ],
              "droppedAttributesCount": 0,
              "events": [
                {
                  "attributes": [
                    {
                      "key": "ai.response.msToFirstChunk",
                      "value": { "doubleValue": 1304.0409099999997 }
                    }
                  ],
                  "name": "ai.stream.firstChunk",
                  "timeUnixNano": "1764673067797387910",
                  "droppedAttributesCount": 0
                },
                {
                  "attributes": [],
                  "name": "ai.stream.finish",
                  "timeUnixNano": "1764673068390820651",
                  "droppedAttributesCount": 0
                }
              ],
              "droppedEventsCount": 0,
              "status": { "code": 0 },
              "links": [],
              "droppedLinksCount": 0
            },
            {
              "traceId": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6",
              "spanId": "c3d4e5f6a7b8c9d0",
              "parentSpanId": "a9b8c7d6e5f4321",
              "name": "ai.streamText.doStream",
              "kind": 1,
              "startTimeUnixNano": "1764673068396000000",
              "endTimeUnixNano": "1764673069292626863",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.streamText.doStream" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.streamText.doStream" }
                },
                {
                  "key": "ai.model.provider",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "ai.model.id",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.settings.maxRetries",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.telemetry.metadata.trace_id",
                  "value": { "stringValue": "trace-abc123-def456-ghi789" }
                },
                {
                  "key": "ai.telemetry.metadata.trace_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.prompt_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.props",
                  "value": {
                    "stringValue": "{\"customer_question\":\"I'm having trouble with my order. How long does shipping take?\"}"
                  }
                },
                {
                  "key": "ai.prompt.format",
                  "value": { "stringValue": "messages" }
                },
                {
                  "key": "ai.prompt.messages",
                  "value": {
                    "stringValue": "[{\"role\":\"system\",\"content\":\"You are a customer service agent for a company that sells products online. You are given a customer's question and you need to respond to the customer. You need to be friendly, professional, and helpful.\\n\\nYou have access to the following tool:\\n\\n* search\\\\_knowledgebase: Search the company knowledgebase for information about shipping, warranty, and returns. Use this when customers ask about these topics.\"},{\"role\":\"user\",\"content\":[{\"type\":\"text\",\"text\":\"I'm having trouble with my order. How long does shipping take?\"}]},{\"role\":\"assistant\",\"content\":[{\"type\":\"tool-call\",\"toolCallId\":\"call_xyz123abc456def789\",\"toolName\":\"search_knowledgebase\",\"args\":{\"query\":\"shipping times\"}}]},{\"role\":\"tool\",\"content\":[{\"type\":\"tool-result\",\"toolCallId\":\"call_xyz123abc456def789\",\"toolName\":\"search_knowledgebase\",\"result\":{\"articles\":[{\"topic\":\"shipping\",\"content\":\"Standard shipping takes 3–5 business days.\"},{\"topic\":\"warranty\",\"content\":\"All products include a 1-year limited warranty.\"},{\"topic\":\"returns\",\"content\":\"You can return items within 30 days of delivery.\"}]}}]}]"
                  }
                },
                {
                  "key": "ai.prompt.tools",
                  "value": {
                    "arrayValue": {
                      "values": [
                        {
                          "stringValue": "{\"type\":\"function\",\"name\":\"search_knowledgebase\",\"description\":\"Search the company knowledgebase for information about shipping, warranty, and returns policies.\",\"parameters\":{\"type\":\"object\",\"properties\":{\"query\":{\"type\":\"string\",\"description\":\"The search query to find relevant information\"}},\"required\":[\"query\"]}}"
                        }
                      ]
                    }
                  }
                },
                {
                  "key": "ai.prompt.toolChoice",
                  "value": { "stringValue": "{\"type\":\"auto\"}" }
                },
                {
                  "key": "gen_ai.system",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "gen_ai.request.model",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.response.msToFirstChunk",
                  "value": { "doubleValue": 615.1306490000006 }
                },
                {
                  "key": "ai.response.msToFinish",
                  "value": { "doubleValue": 896.0004630000003 }
                },
                {
                  "key": "ai.response.avgCompletionTokensPerSecond",
                  "value": { "doubleValue": 33.48212555555341 }
                },
                {
                  "key": "ai.response.finishReason",
                  "value": { "stringValue": "stop" }
                },
                {
                  "key": "ai.response.text",
                  "value": {
                    "stringValue": "Standard shipping for your order takes 3–5 business days. If you have any more questions or need further assistance, feel free to ask!"
                  }
                },
                {
                  "key": "ai.response.id",
                  "value": { "stringValue": "chatcmpl-abc456def789ghi012" }
                },
                {
                  "key": "ai.response.model",
                  "value": { "stringValue": "gpt-4o-2024-08-06" }
                },
                {
                  "key": "ai.response.timestamp",
                  "value": { "stringValue": "2025-12-02T10:57:48.000Z" }
                },
                {
                  "key": "ai.response.providerMetadata",
                  "value": {
                    "stringValue": "{\"openai\":{\"reasoningTokens\":0,\"acceptedPredictionTokens\":0,\"rejectedPredictionTokens\":0,\"cachedPromptTokens\":0}}"
                  }
                },
                {
                  "key": "ai.usage.promptTokens",
                  "value": { "intValue": 241 }
                },
                {
                  "key": "ai.usage.completionTokens",
                  "value": { "intValue": 30 }
                },
                {
                  "key": "gen_ai.response.finish_reasons",
                  "value": {
                    "arrayValue": {
                      "values": [{ "stringValue": "stop" }]
                    }
                  }
                },
                {
                  "key": "gen_ai.response.id",
                  "value": { "stringValue": "chatcmpl-abc456def789ghi012" }
                },
                {
                  "key": "gen_ai.response.model",
                  "value": { "stringValue": "gpt-4o-2024-08-06" }
                },
                {
                  "key": "gen_ai.usage.input_tokens",
                  "value": { "intValue": 241 }
                },
                {
                  "key": "gen_ai.usage.output_tokens",
                  "value": { "intValue": 30 }
                }
              ],
              "droppedAttributesCount": 0,
              "events": [
                {
                  "attributes": [
                    {
                      "key": "ai.response.msToFirstChunk",
                      "value": { "doubleValue": 615.1306490000006 }
                    }
                  ],
                  "name": "ai.stream.firstChunk",
                  "timeUnixNano": "1764673069011579349",
                  "droppedAttributesCount": 0
                },
                {
                  "attributes": [],
                  "name": "ai.stream.finish",
                  "timeUnixNano": "1764673069292449363",
                  "droppedAttributesCount": 0
                }
              ],
              "droppedEventsCount": 0,
              "status": { "code": 0 },
              "links": [],
              "droppedLinksCount": 0
            },
            {
              "traceId": "a1b2c3d4e5f6a7b8c9d0e1f2a3b4c5d6",
              "spanId": "a9b8c7d6e5f4321",
              "name": "ai.streamText",
              "kind": 1,
              "startTimeUnixNano": "1764673066489000000",
              "endTimeUnixNano": "1764673069293367217",
              "attributes": [
                {
                  "key": "operation.name",
                  "value": { "stringValue": "ai.streamText" }
                },
                {
                  "key": "ai.operationId",
                  "value": { "stringValue": "ai.streamText" }
                },
                {
                  "key": "ai.model.provider",
                  "value": { "stringValue": "openai.chat" }
                },
                {
                  "key": "ai.model.id",
                  "value": { "stringValue": "gpt-4o" }
                },
                {
                  "key": "ai.settings.maxRetries",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.telemetry.metadata.trace_id",
                  "value": { "stringValue": "trace-abc123-def456-ghi789" }
                },
                {
                  "key": "ai.telemetry.metadata.trace_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.prompt_name",
                  "value": { "stringValue": "customer-support-agent" }
                },
                {
                  "key": "ai.telemetry.metadata.props",
                  "value": {
                    "stringValue": "{\"customer_question\":\"I'm having trouble with my order. How long does shipping take?\"}"
                  }
                },
                {
                  "key": "ai.prompt",
                  "value": {
                    "stringValue": "{\"messages\":[{\"role\":\"system\",\"content\":\"You are a customer service agent for a company that sells products online. You are given a customer's question and you need to respond to the customer. You need to be friendly, professional, and helpful.\\n\\nYou have access to the following tool:\\n\\n* search\\\\_knowledgebase: Search the company knowledgebase for information about shipping, warranty, and returns. Use this when customers ask about these topics.\"},{\"role\":\"user\",\"content\":\"I'm having trouble with my order. How long does shipping take?\"}]}"
                  }
                },
                {
                  "key": "ai.settings.maxSteps",
                  "value": { "intValue": 2 }
                },
                {
                  "key": "ai.response.finishReason",
                  "value": { "stringValue": "stop" }
                },
                {
                  "key": "ai.response.text",
                  "value": {
                    "stringValue": "Standard shipping for your order takes 3–5 business days. If you have any more questions or need further assistance, feel free to ask!"
                  }
                },
                {
                  "key": "ai.usage.promptTokens",
                  "value": { "intValue": 397 }
                },
                {
                  "key": "ai.usage.completionTokens",
                  "value": { "intValue": 47 }
                },
                {
                  "key": "ai.response.providerMetadata",
                  "value": {
                    "stringValue": "{\"openai\":{\"reasoningTokens\":0,\"acceptedPredictionTokens\":0,\"rejectedPredictionTokens\":0,\"cachedPromptTokens\":0}}"
                  }
                }
              ],
              "droppedAttributesCount": 0,
              "events": [],
              "droppedEventsCount": 0,
              "status": { "code": 0 },
              "links": [],
              "droppedLinksCount": 0
            }
          ]
        }
      ]
    }
  ]
}

